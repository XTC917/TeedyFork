<div class="chat-container">
    <!-- 聊天头部 -->
    <div class="chat-header">
        <h4>{{targetUser.username}}</h4>
    </div>

    <!-- 聊天消息区域 -->
    <div class="chat-messages" id="chatMessages">
        <div class="message-container" ng-repeat="message in messages">
            <!-- 对方的消息 -->
            <div class="message message-left" ng-if="message.senderUsername !== currentUser.username">
                <div class="message-avatar">
                    <i class="fa fa-user"></i>
                </div>
                <div class="message-content">
                    <div class="message-text">{{message.content}}</div>
                    <div class="message-time">{{message.timestamp | date:'HH:mm'}}</div>
                </div>
            </div>
            <!-- 自己的消息 -->
            <div class="message message-right" ng-if="message.senderUsername === currentUser.username">
                <div class="message-content">
                    <div class="message-text">{{message.content}}</div>
                    <div class="message-time">{{message.timestamp | date:'HH:mm'}}</div>
                </div>
                <div class="message-avatar">
                    <i class="fa fa-user"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- 输入区域 -->
    <div class="chat-input">
        <div class="input-group">
            <input type="text" 
                   class="form-control" 
                   ng-model="newMessage" 
                   ng-keypress="onKeyPress($event)"
                   placeholder="输入消息...">
            <div class="input-group-append">
                <button class="btn btn-primary" ng-click="sendMessage()">
                    <i class="fa fa-paper-plane"></i> 发送
                </button>
            </div>
        </div>
    </div>
</div>

<style>
.chat-container {
    display: flex;
    flex-direction: column;
    height: calc(100vh - 60px);
    background-color: #f5f5f5;
}

.chat-header {
    background-color: #fff;
    padding: 15px;
    border-bottom: 1px solid #e0e0e0;
    text-align: center;
}

.chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
}

.message-container {
    margin-bottom: 20px;
}

.message {
    display: flex;
    align-items: flex-start;
    margin-bottom: 10px;
}

.message-left {
    justify-content: flex-start;
}

.message-right {
    justify-content: flex-end;
}

.message-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #e0e0e0;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 10px;
}

.message-content {
    max-width: 70%;
}

.message-text {
    padding: 10px 15px;
    border-radius: 15px;
    margin-bottom: 5px;
    word-wrap: break-word;
}

.message-left .message-text {
    background-color: #fff;
    border: 1px solid #e0e0e0;
}

.message-right .message-text {
    background-color: #95ec69;
}

.message-time {
    font-size: 12px;
    color: #999;
    margin-top: 5px;
}

.message-left .message-time {
    text-align: left;
}

.message-right .message-time {
    text-align: right;
}

.chat-input {
    background-color: #fff;
    padding: 15px;
    border-top: 1px solid #e0e0e0;
}

.chat-input .form-control {
    border-radius: 20px;
    padding: 10px 20px;
}

.chat-input .btn {
    border-radius: 20px;
    margin-left: 10px;
}
</style> 